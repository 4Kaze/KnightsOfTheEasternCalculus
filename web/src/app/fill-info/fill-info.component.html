<div class="container">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark rounded shadow hover-dropdown">
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto hover-dropdown">
        <li class="nav-item active">
          <a class="nav-link" routerLink="/login">Logowanie</a>
        </li>
      </ul>
    </div>
  </nav>
</div>

<div class="container">
  <div class="shadow bg-white rounded p-4 my-3 d-flex flex-column">
    <h2 align="center">Rejestracja użytkownika</h2>
    <p class="mb-5 align-self-center">Wszystkie pola są wymagane.</p>
    <div class="col-9 align-self-center">

      <div class="form-row">
        <div class="form-group col-md-6">
          <label>Imię</label>
          <input id="firstName" name="firstName" class="form-control" type="text" pattern="[^0-9]*" required
                 [(ngModel)]="inFirstName" #firstName="ngModel"
                 (input)="inFirstName=$event.target.value">
          <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="alert alert-danger mt-2">
            <div *ngIf="firstName.errors.required">
              Imię jest wymagane.
            </div>
          </div>
        </div>

        <div class="form-group col-md-6">
          <label>Nazwisko</label>
          <input id="lastName" name="lastName" class="form-control" type="text" pattern="[^0-9]*" required
                 [(ngModel)]="inLastName" #lastName="ngModel"
                 (input)="inLastName=$event.target.value">
          <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger mt-2">
            <div *ngIf="lastName.errors.required">
              Nazwisko jest wymagane.
            </div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label>Data urodzenia</label>
          <input id="dateOfBirth" name="dateOfBirth" class="form-control" type="date" required
                 [(ngModel)]="inDateOfBirth" #dateOfBirth="ngModel"
                 (input)="inDateOfBirth=$event.target.value">
          <div *ngIf="dateOfBirth.invalid && (dateOfBirth.dirty || dateOfBirth.touched)" class="alert alert-danger mt-2">
            <div *ngIf="dateOfBirth.errors.required">
              Data urodzenia jest wymagana.
            </div>
          </div>
        </div>

        <div class="form-group col-md-6">
          <label>Numer telefonu</label>
          <input id="phoneNumber" name="phoneNumber" class="form-control" type="tel" pattern="[0-9]{9}" required
                 [(ngModel)]="inPhoneNumber" #phoneNumber="ngModel"
                 (input)="inPhoneNumber=$event.target.value">
          <div *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)" class="alert alert-danger mt-2">
            <div *ngIf="phoneNumber.errors.required">
              Numer telefonu jest wymagany.
            </div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-6">
          <label>Adres</label>
          <input id="address" name="address" class="form-control" type="text" required
                 [(ngModel)]="inAddress" #address="ngModel"
                 (input)="inAddress=$event.target.value">
          <div *ngIf="address.invalid && (address.dirty || address.touched)" class="alert alert-danger mt-2">
            <div *ngIf="address.errors.required">
              Adres jest wymagany.
            </div>
          </div>
        </div>

        <div class="form-group col-3">
          <label>Miasto</label>
          <input id="city" name="city" class="form-control" type="text" pattern="[^0-9]*" required
                 [(ngModel)]="inCity" #city="ngModel"
                 (input)="inCity=$event.target.value">
          <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger mt-2">
            <div *ngIf="city.errors.required">
              Miasto jest wymagane.
            </div>
          </div>
        </div>

        <div class="form-group col-3">
          <label>Kod pocztowy</label>
          <input id="postalCode" name="postalCode" class="form-control" type="text" pattern="[0-9]{2}-[0-9]{3}" required
                 [(ngModel)]="inPostalCode" #postalCode="ngModel"
                 (input)="inPostalCode=$event.target.value">
          <div *ngIf="postalCode.invalid && (postalCode.dirty || postalCode.touched)" class="alert alert-danger mt-2">
            <div *ngIf="postalCode.errors.required">
              Kod pocztowy jest wymagany.
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>O mnie</label>
        <textarea id="aboutMe" name="aboutMe" class="form-control" rows="5" type="text"
                  [(ngModel)]="inAboutMe"
                  (input)="inAboutMe=$event.target.value"></textarea>
      </div>

      <div class="form-group">
      <label>Zdjęcie</label>
        <div class="custom-file">
          <input id="photoUrl" name="photoUrl" class="custom-file-input" type="file"
                 accept=".png,.jpg,.jpeg,image/png,image/jpeg" required
                 (change)="onChooseFile($event.target.files)">
          <label class="custom-file-label" #fileLabel for="photoUrl">Wybierz zdjęcie (.png lub .jpeg)</label>
        </div>
      </div>
    </div>

      <p class="mb-3 mt-5 align-self-center">Pola niewymagane:</p>
    <div class="col-9 align-self-center">
      <div>
        <label>Doświadczenie zawodowe:</label>
        <table class="table table-hover">
          <thead>
          <tr>
            <th>Nazwa doświadczenia</th>
            <th>Zajmowana pozycja</th>
            <th>Lata</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let experience of ex" (click)="onSelectExperience(experience)"
              [class.selected]="experience === selectedExperience">
            <td>{{ experience.name }}</td>
            <td>{{ experience.position }}</td>
            <td>{{ experience.years }}</td>
            <td>
              <button class="btn btn-danger" (click)="removeExperience(experience)">Usuń</button>
            </td>
          </tr>
          </tbody>
        </table>
        <div class="input-group">
          <input id="ename" name="ename" class="form-control" type="text" required
                 [(ngModel)]="inEname" #ename="ngModel"
                 (input)="inEname=$event.target.value"
                 placeholder="Biedronka">
          <input id="eposition" name="eposition" class="form-control" type="text" required
                 [(ngModel)]="inEposition" #eposition="ngModel"
                 (input)="inEposition=$event.target.value"
                 placeholder="Magazynier">
          <input id="eyears" name="eyears" class="form-control" type="text" pattern="[0-9]{4}-[0-9]{4}" required
                 [(ngModel)]="inEyears" #eyears="ngModel"
                 (input)="inEyears=$event.target.value"
                 placeholder="2010-2012">
        </div>
        <button class="btn btn-secondary float-right my-2" type="button" (click)="addExperience()"
                [disabled]="!ename.valid || !eposition.valid || !eyears.valid">
          Dodaj
        </button>
        <div class="clearfix"></div>
      </div>

      <div>
        <label>Edukacja:</label>
        <table class="table table-hover">
          <thead>
          <tr>
            <th>Nazwa uczelni</th>
            <th>Kierunek</th>
            <th>Lata studiowania</th>
            <th>Tytuł</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let university of un" (click)="onSelectUniversity(university)"
              [class.selected]="university === selectedUniversity">
            <td>{{ university.name }}</td>
            <td>{{ university.major }}</td>
            <td>{{ university.years }}</td>
            <td>{{ university.degree }}</td>
            <td>
              <button class="btn btn-danger" (click)="removeUniversity(university)">Usuń</button>
            </td>
          </tr>
          </tbody>
        </table>
        <div class="input-group">
          <input id="uname" name="uname" class="form-control" type="text" required
                 [(ngModel)]="inUname" #uname="ngModel"
                 (input)="inUname=$event.target.value"
                  placeholder="Politechnika Łódzka">
          <input id="umajor" name="umajor" class="form-control" type="text" required
                 [(ngModel)]="inUmajor" #umajor="ngModel"
                 (input)="inUmajor=$event.target.value"
                 placeholder="Informatyka">
          <input id="uyears" name="uyears" class="form-control" type="text" pattern="[0-9]{4}-[0-9]{4}" required
                 [(ngModel)]="inUyears" #uyears="ngModel"
                 (input)="inUyears=$event.target.value"
                 placeholder="2005-2009">
          <select id="udegree" name="udegree" class="form-control" required
                  [(ngModel)]="inUdegree" #udegree="ngModel"
                  (input)="inUdegree=$event.target.value">
            <option>lic.</option>
            <option>inż.</option>
            <option>mgr</option>
            <option>dr</option>
            <option>prof.</option>
          </select>
        </div>
        <button class="btn btn-secondary float-right my-2" type="button" (click)="addUniversity()"
                [disabled]="!uname.valid || !umajor.valid || !uyears.valid || !udegree.valid">
          Dodaj
        </button>
        <div class="clearfix"></div>
      </div>
      </div>

      <!-- BOTTOM -->
      <div class="col-11 align-self-center mt-5 mb-3">
        <button class="btn btn-primary float-right" (click)="fillInfo()" [disabled]="loadingPhoto || loadingProfile ||
          !firstName.valid || !lastName.valid || !dateOfBirth.valid || !phoneNumber.valid || !address.valid || !city.valid || !postalCode.valid
          || (photo == undefined && !this.photoUploaded)">
          Zarejestruj
        </button>
        <div *ngIf="loadingPhoto || loadingProfile" class="float-right spinner-grow mr-3"></div>
      </div>
    </div>
</div>
